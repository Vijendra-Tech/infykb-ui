┌─────────────────────────────────────────────────────────────────────┐
│                          Next.js Application                        │
│                                                                     │
│  ┌─────────────────┐     ┌─────────────────┐    ┌────────────────┐  │
│  │  ThreadProvider │     │  StreamProvider  │    │ ArtifactProvider│  │
│  └────────┬────────┘     └────────┬────────┘    └────────┬───────┘  │
│           │                       │                      │          │
│           │                       │                      │          │
│           ▼                       ▼                      ▼          │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │                        Thread Component                     │    │
│  │                                                             │    │
│  │  ┌─────────────┐  ┌────────────┐  ┌─────────────────────┐   │    │
│  │  │Thread History│  │Message List│  │Input & File Upload │   │    │
│  │  └─────────────┘  └────────────┘  └─────────────────────┘   │    │
│  │                                                             │    │
│  │  ┌─────────────────────┐      ┌───────────────────────────┐ │    │
│  │  │Human/AI/Tool Messages│      │Artifact Side Panel        │ │    │
│  │  └─────────────────────┘      └───────────────────────────┘ │    │
│  └─────────────────────────────────────────────────────────────┘    │
│                                                                     │
└───────────────────────────────┬─────────────────────────────────────┘
                                │
                                ▼
┌───────────────────────────────────────────────────────────────────────┐
│                       Communication Layer                             │
│                                                                       │
│  ┌─────────────────────────┐        ┌────────────────────────────┐    │
│  │ useTypedStream Hook     │        │ LangGraph SDK React        │    │
│  │ (extends useStream)     │◄──────►│ (@langchain/langgraph-sdk) │    │
│  └─────────────────────────┘        └────────────────────────────┘    │
│                                                                       │
└───────────────────────────────┬───────────────────────────────────────┘
                                │
                                ▼
┌───────────────────────────────────────────────────────────────────────┐
│                       Backend Connection                              │
│                                                                       │
│  ┌─────────────────────────┐        ┌────────────────────────────┐    │
│  │ Direct Connection       │        │ API Passthrough            │    │
│  │ (Development)           │        │ (Production)               │    │
│  └─────────────────────────┘        └────────────────────────────┘    │
│                                                                       │
└───────────────────────────────┬───────────────────────────────────────┘
                                │
                                ▼
┌───────────────────────────────────────────────────────────────────────┐
│                       LangGraph Server                                │
│                                                                       │
│  ┌─────────────────────────┐        ┌────────────────────────────┐    │
│  │ Agent Graph             │        │ LangSmith Integration      │    │
│  │ (Python or TypeScript)  │        │ (Tracing & Monitoring)     │    │
│  └─────────────────────────┘        └────────────────────────────┘    │
│                                                                       │
└───────────────────────────────────────────────────────────────────────┘